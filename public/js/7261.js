(self.webpackChunk=self.webpackChunk||[]).push([[7261],{742:(t,a,e)=>{"use strict";e.d(a,{Z:()=>s});var n=e(3645),c=e.n(n)()((function(t){return t[1]}));c.push([t.id,".attendance-status[data-v-53cec328]{width:10px;height:10px;border-radius:3px;display:inline-block}td[data-v-53cec328]{padding:0}.card-attendance[data-v-53cec328]{cursor:pointer;height:140px}.card-attendance:hover .card-attendance__date span[data-v-53cec328]{transform:scale(1.1)}.card-attendance .card-body[data-v-53cec328]{display:flex;align-items:center;justify-content:center}.card-attendance__date[data-v-53cec328]{margin:0!important}.card-attendance__date span[data-v-53cec328]{width:68px;height:68px;transform:scale(1);transition:all .3s linear}.card-attendance--present[data-v-53cec328]{background-color:#bfe3aa}.card-attendance--present .card-attendance__date span[data-v-53cec328]{background-color:#6fc03e}.card-attendance--absent[data-v-53cec328]{background-color:#fcd7d7}.card-attendance--absent .card-attendance__date span[data-v-53cec328]{background-color:#d9534f}.card-attendance--holiday[data-v-53cec328]{background-color:#ebecec}.card-attendance--holiday .card-attendance__date span[data-v-53cec328]{background-color:#9aa1a1}",""]);const s=c},5183:function(t){t.exports=function(){"use strict";var t="week",a="year";return function(e,n,c){var s=n.prototype;s.week=function(e){if(void 0===e&&(e=null),null!==e)return this.add(7*(e-this.week()),"day");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var s=c(this).startOf(a).add(1,a).date(n),r=c(this).endOf(t);if(s.isBefore(r))return 1}var d=c(this).startOf(a).date(n).startOf(t).subtract(1,"millisecond"),o=this.diff(d,t,!0);return o<0?c(this).startOf("week").week():Math.ceil(o)},s.weeks=function(t){return void 0===t&&(t=null),this.week(t)}}}()},7261:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>p});var n=e(7757),c=e.n(n),s=e(7484),r=e.n(s),d=e(5183),o=e.n(d);function i(t,a,e,n,c,s,r){try{var d=t[s](r),o=d.value}catch(t){return void e(t)}d.done?a(o):Promise.resolve(o).then(n,c)}function l(t){return function(){var a=this,e=arguments;return new Promise((function(n,c){var s=t.apply(a,e);function r(t){i(s,n,c,r,d,"next",t)}function d(t){i(s,n,c,r,d,"throw",t)}r(void 0)}))}}r().extend(o());const h={data:function(){return{searchForm:new Form({month:"",year:""}),attendances:[]}},computed:{daysInMonth:function(){return""!=this.searchForm.year&&""!=this.searchForm.month&&r()("".concat(this.searchForm.year,"-").concat(this.searchForm.month)).daysInMonth()}},created:function(){"Student"!=this.authenticateUser.original_role&&this.redirect("401"),this.searchForm.year=r()().year(),this.searchForm.month=("0"+(r()().month()+1)).slice(-2),this.getAttendanceReport()},methods:{setYearMonth:function(t){var a=this;return l(c().mark((function e(){var n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r()(t).format("MM"),s=r()(t).format("YYYY"),a.searchForm.month=n,a.searchForm.year=s,e.next=7,a.getAttendanceReport();case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},isPresent:function(t,a){var e=t<10?"0".concat(t):t,n="".concat(this.searchForm.year,"-").concat(this.searchForm.month,"-").concat(e);return!!a.attendances.hasOwnProperty(n)&&1==a.attendances[n][0].status},attendanceStatus:function(t,a){var e=t<10?"0".concat(t):t,n="".concat(this.searchForm.year,"-").concat(this.searchForm.month,"-").concat(e);return a.attendances.hasOwnProperty(n)?1==a.attendances[n][0].status?"card-attendance--present":"card-attendance--absent":"card-attendance--holiday"},getAttendanceReport:function(){var t=this;return l(c().mark((function a(){var e;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.attendances=[],a.next=4,t.searchForm.post("/api/student/get-attendance");case 4:e=a.sent,t.attendances=e.data.attendences,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},getMonthName:function(t){return r()("".concat(this.searchForm.year,"-").concat(t)).format("MMMM")}}};var u=e(3379),v=e.n(u),m=e(742),f={insert:"head",singleton:!1};v()(m.Z,f);m.Z.locals;const p=(0,e(1900).Z)(h,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"page-header d-print-none"},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col-12"},[e("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),e("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("academic")))])])])]),t._v(" "),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-3 col-6"},[e("date-picker",{attrs:{value:t.searchForm.year+"-"+t.searchForm.month,"minimum-view":"month","maximum-view":"year",format:"MMMM, yyyy","input-class":"form-control text-center",placeholder:t.$t("select_month")},on:{input:function(a){return t.setYearMonth(a)}}}),t._v(" "),e("has-error",{staticClass:"d-block",attrs:{form:t.searchForm,field:"date"}})],1)])]),t._v(" "),e("div",{staticClass:"col-md-4 my-3"},[e("div",{staticClass:"card bg-secondary text-white"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"text-center"},[e("h2",[t._v(t._s(t.$t("attendance_report")))]),t._v(" "),e("h4",[t._v(t._s(t.$t("month"))+" : "+t._s(t.getMonthName(t.searchForm.month)))]),t._v(" "),e("h5",[t._v(t._s(t.$t("year"))+" : "+t._s(t.searchForm.year))])])])])]),t._v(" "),e("div",{staticClass:"col-12"},[e("ul",{staticClass:"list-unstyled d-flex"},[e("li",{staticClass:"me-3"},[e("span",{staticClass:"attendance-status bg-success"}),t._v("\n                    "+t._s(t.$t("present"))+"\n                ")]),t._v(" "),e("li",{staticClass:"me-3"},[e("span",{staticClass:"attendance-status bg-danger"}),t._v("\n                    "+t._s(t.$t("absent"))+"\n                ")]),t._v(" "),e("li",[e("span",{staticClass:"attendance-status bg-secondary"}),t._v("\n                    "+t._s(t.$t("not_entry"))+"\n                ")])])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[t.attendances.length?t._l(t.attendances,(function(a){return e("div",{key:a.id,staticClass:"row"},t._l(t.daysInMonth,(function(n){return e("div",{key:n,staticClass:"col-6 col-md-3 col-lg-2 p-1"},[e("div",{staticClass:"card card-attendance",class:t.attendanceStatus(n,a)},[e("div",{staticClass:"card-body text-center"},[e("div",{staticClass:"mb-3 card-attendance__date"},[e("span",{staticClass:"avatar avatar-md avatar-rounded text-white"},[t._v(t._s(n))])])])])])})),0)})):e("div",{staticClass:"d-flex justify-content-center py-3"},[e("NotFound",{attrs:{word:"Attendance"}})],1)],2)])])])])}),[],!1,null,"53cec328",null).exports}}]);