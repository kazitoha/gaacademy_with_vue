(self.webpackChunk=self.webpackChunk||[]).push([[7135],{7135:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>l});var r=s(7757),a=s.n(r),n=s(7484),o=s.n(n);function c(t,e,s,r,a,n,o){try{var c=t[n](o),i=c.value}catch(t){return void s(t)}c.done?e(i):Promise.resolve(i).then(r,a)}function i(t){return function(){var e=this,s=arguments;return new Promise((function(r,a){var n=t.apply(e,s);function o(t){c(n,r,a,o,i,"next",t)}function i(t){c(n,r,a,o,i,"throw",t)}o(void 0)}))}}const d={components:{NotFound:function(){return s.e(549).then(s.bind(s,549))}},computed:{searchButtonDisabled:function(){return""==this.searchForm.date||""==this.searchForm.student_id},childs:function(){return this.$store.getters["parent/getChilds"]}},data:function(){return{searchForm:{date:"",student_id:""},homeworks:[]}},methods:{setDate:function(t){var e=o()(t).format("YYYY-MM-DD");this.searchForm.date=e},getHomeworks:function(){var t=this;return i(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/parent/students/homeworks",{params:{student_id:t.searchForm.student_id,date:t.searchForm.date}});case 3:s=e.sent,t.homeworks=s.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){var t=this;return i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Guardian"!=t.authenticateUser.original_role&&t.redirect("401"),e.next=3,t.$store.dispatch("parent/fetchChilds");case 3:return e.next=5,o()(new Date).format("YYYY-MM-DD");case 5:t.searchForm.date=e.sent,t.searchForm.student_id=t.childs[0].id,t.getHomeworks();case 8:case"end":return e.stop()}}),e)})))()}};const l=(0,s(1900).Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-header d-print-none"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col"},[s("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),s("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("homework")))])])])]),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-sm-2 col-6"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.student_id,expression:"searchForm.student_id"}],staticClass:"form-control text-center",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"student_id",e.target.multiple?s:s[0])}}},[s("option",{staticClass:"d-none",attrs:{value:"",selected:""}},[t._v(t._s(t.$t("select_child")))]),t._v(" "),t._l(t.childs,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\n              "+t._s(e.name)+"\n            ")])}))],2)]),t._v(" "),s("div",{staticClass:"col-sm-4 col-md-3 col-6"},[s("date-picker",{attrs:{value:t.searchForm.date,"maximum-view":"year",format:"dd MMMM, yyyy","input-class":"form-control text-center",placeholder:t.$t("select_date")},on:{input:function(e){return t.setDate(e)}}})],1),t._v(" "),s("div",{staticClass:"col-sm-3 col-4"},[s("button",{staticClass:"btn btn-primary btn-outline",attrs:{disabled:t.searchButtonDisabled},on:{click:t.getHomeworks}},[t._v("\n            "+t._s(t.$t("get_homework"))+"\n          ")])])])]),t._v(" "),s("div",{staticClass:"col-md-6 col-xl-12 mt-3"},[t.homeworks&&t.homeworks.length?s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h3",{staticClass:"card-title"},[t._v(t._s(t.$t("homework")))])]),t._v(" "),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("teacher")))]),t._v(" "),s("th",[t._v(t._s(t.$t("subject")))]),t._v(" "),s("th",[t._v(t._s(t.$t("date")))])])]),t._v(" "),s("tbody",t._l(t.homeworks,(function(e){return s("tr",{key:e.id},[e.teacher?s("td",[t._v("\n                  "+t._s(e.teacher.user.name)+"\n                ")]):t._e(),t._v(" "),s("td",[t._v(t._s(e.subject.name))]),t._v(" "),s("td",[t._v("\n                  "+t._s(t.formateDate(e.start_date))+" -\n                  "+t._s(t.formateDate(e.end_date))+"\n                ")])])})),0)])])]):s("div",{staticClass:"d-flex justify-content-center py-3"},[s("NotFound",{attrs:{word:"homework"}})],1)])])])}),[],!1,null,null,null).exports}}]);