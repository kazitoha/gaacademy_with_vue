(self.webpackChunk=self.webpackChunk||[]).push([[1195],{1195:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>l});var r=s(7757),a=s.n(r);function o(t,e,s,r,a,o,n){try{var i=t[o](n),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(r,a)}function n(t){return function(){var e=this,s=arguments;return new Promise((function(r,a){var n=t.apply(e,s);function i(t){o(n,r,a,i,l,"next",t)}function l(t){o(n,r,a,i,l,"throw",t)}i(void 0)}))}}const i={data:function(){return{form:new Form({user_type:"",title:"",message:""}),roles:[]}},computed:{sendButtonDisabled:function(){return""==this.form.user_type||""==this.form.title||""==this.form.message}},methods:{reset:function(){this.isModalShow=!1,this.form.reset(),this.form.clear()},sendMessage:function(){var t=this;return n(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.form.post("/api/messages");case 3:s=e.sent,t.reset(),t.toastSuccess(s.data.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.toastError(e.t0.response.data.message),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getRoles:function(){var t=this;return n(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/messages/get-roles");case 3:s=e.sent,console.log(s),t.roles=s.data.roles,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.toastError(e.t0.response.data.message),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},created:function(){var t=this;return n(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.hasPermisssion("message-notification-send");case 2:t.getRoles();case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){}};const l=(0,s(1900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-header d-print-none"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col"},[s("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),s("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("message")))])])])]),t._v(" "),s("div",{staticClass:"row row-cards mt-2"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v(t._s(t.$t("message_notification")))])]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-10 col-xl-6"},[s("form",{attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"form-group mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"user_type"}},[t._v(t._s(t.$t("recipient")))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.user_type,expression:"form.user_type"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("user_type")},attrs:{id:"user_type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"user_type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("\n                                            "+t._s(t.$t("select_recipient"))+"\n                                        ")]),t._v(" "),t._l(t.roles,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                                            "+t._s(e.name)+"\n                                        ")])}))],2),t._v(" "),s("has-error",{attrs:{form:t.form,field:"user_type"}})],1),t._v(" "),s("div",{staticClass:"form-group mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"title"}},[t._v(t._s(t.$t("title"))+"\n                                    ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("title")},attrs:{id:"title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"title"}})],1),t._v(" "),s("div",{staticClass:"form-group mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"message"}},[t._v(t._s(t.$t("message")))]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("message")},attrs:{id:"message",rows:"8"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"message"}})],1),t._v(" "),s("div",{staticClass:"form-group mb-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.sendButtonDisabled}},[t._v("\n                                        "+t._s(t.$t("send"))+"\n                                    ")])])])])])])])])])])}),[],!1,null,null,null).exports}}]);