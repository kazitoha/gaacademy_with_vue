(self.webpackChunk=self.webpackChunk||[]).push([[9872],{9872:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>l});var a=r(7757),o=r.n(a);function s(t,e,r,a,o,s,n){try{var i=t[s](n),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(a,o)}function n(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var n=t.apply(e,r);function i(t){s(n,a,o,i,l,"next",t)}function l(t){s(n,a,o,i,l,"throw",t)}i(void 0)}))}}const i={data:function(){return{form:new Form({type:"",host:"",port:"",password:"",username:"",encryption:"",from_name:"",from_address:""}),testMailForm:new Form({email:""})}},created:function(){var t=this;return n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadData();case 1:case"end":return e.stop()}}),e)})))()},methods:{saveSetting:function(){var t=this;return n(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.form.put("/api/setting/mail");case 3:r=e.sent,a=r.data,t.toastSuccess(a.message),setTimeout((function(){window.location.reload()}),1500),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.toastError();case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},testMailSend:function(){var t=this;return n(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.testMailForm.post("/api/setting/send-test-mail");case 3:r=e.sent,a=r.data,t.testMailForm.reset(),t.toastSuccess(a.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.toastError();case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},loadData:function(){var t=this;return n(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/setting/mail");case 3:r=e.sent,a=r.data,t.form.fill(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.toastError();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},reset:function(){var t=this;return n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadData();case 1:case"end":return e.stop()}}),e)})))()}}};const l=(0,r(1900).Z)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-pane active show",attrs:{id:"website"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body border-bottom py-3"},[r("form",{attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.saveSetting(e)}}},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-12 col-md-6 col-xxl-5"},[r("div",{staticClass:"mb-3"},[r("div",{staticClass:"form-floating mb-3"},[r("input",{staticClass:"form-control",attrs:{disabled:"",type:"text",value:"SMTP",autocomplete:"off",placeholder:""}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("mail_type")))])]),t._v(" "),r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.host,expression:"form.host"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("host")},attrs:{type:"text",autocomplete:"off",placeholder:t.$t("host")},domProps:{value:t.form.host},on:{input:function(e){e.target.composing||t.$set(t.form,"host",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("mail_host")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"host"}})],1),t._v(" "),r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.port,expression:"form.port"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("port")},attrs:{type:"number",autocomplete:"off",placeholder:t.$t("port")},domProps:{value:t.form.port},on:{input:function(e){e.target.composing||t.$set(t.form,"port",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(" "+t._s(t.$t("mail_port")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"port"}})],1),t._v(" "),r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.encryption,expression:"form.encryption"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("encryption")},attrs:{type:"text",autocomplete:"off",placeholder:t.$t("encryption")},domProps:{value:t.form.encryption},on:{input:function(e){e.target.composing||t.$set(t.form,"encryption",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v("\n                                    "+t._s(t.$t("mail_encryption")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"encryption"}})],1)])]),t._v(" "),r("div",{staticClass:"col-12 col-md-6 col-xxl-5"},[r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("username")},attrs:{type:"text",autocomplete:"off",placeholder:t.$t("username")},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("mail_username")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"username"}})],1),t._v(" "),r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"password",autocomplete:"off",placeholder:t.$t("password")},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("mail_password")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"password"}})],1),t._v(" "),r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.from_name,expression:"form.from_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("from_name")},attrs:{disabled:"",type:"text",autocomplete:"off",placeholder:t.$t("from_name")},domProps:{value:t.form.from_name},on:{input:function(e){e.target.composing||t.$set(t.form,"from_name",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("mail_from_name")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"from_name"}})],1),t._v(" "),r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.from_address,expression:"form.from_address"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("from_address")},attrs:{type:"email",autocomplete:"off",placeholder:t.$t("from_address")},domProps:{value:t.form.from_address},on:{input:function(e){e.target.composing||t.$set(t.form,"from_address",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("mail_from_email")))]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"from_address"}})],1)]),t._v(" "),t.checkPermission("setting-edit")?r("div",{staticClass:"col-12 col-md-8 col-xxl-6 text-center"},[r("button",{staticClass:"btn btn-primary mt-3 w-200 h-50"},[r("svg",{staticClass:"icon icon-tabler icon-tabler-check",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),t._v(" "),r("path",{attrs:{d:"M5 12l5 5l10 -10"}})]),t._v("\n                            "+t._s(t.$t("save"))+"\n                        ")]),t._v(" "),r("button",{staticClass:"btn btn-secondary mt-3 w-200 h-50",attrs:{type:"button"},on:{click:t.reset}},[r("svg",{staticClass:"icon icon-tabler icon-tabler-refresh",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[r("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),t._v(" "),r("path",{attrs:{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"}}),t._v(" "),r("path",{attrs:{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"}})]),t._v("\n                            "+t._s(t.$t("reset"))+"\n                        ")])]):t._e()])])])]),t._v(" "),r("div",{staticClass:"card mt-3"},[r("div",{staticClass:"card-header"},[r("h3",{staticClass:"card-title"},[t._v(t._s(t.$t("send_test_mail")))])]),t._v(" "),r("div",{staticClass:"card-body"},[r("form",{attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.testMailSend(e)}}},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-xxl-5 col-xl-7 col-md-6 col-12"},[r("div",{staticClass:"form-floating mb-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.testMailForm.email,expression:"testMailForm.email"}],staticClass:"form-control",class:{"is-invalid":t.testMailForm.errors.has("email")},attrs:{placeholder:t.$t("test_email"),type:"email",autocomplete:"off"},domProps:{value:t.testMailForm.email},on:{input:function(e){e.target.composing||t.$set(t.testMailForm,"email",e.target.value)}}}),t._v(" "),r("label",{attrs:{for:"floating-input"}},[t._v(t._s(t.$t("email")))]),t._v(" "),r("has-error",{attrs:{form:t.testMailForm,field:"email"}})],1)]),t._v(" "),r("div",{staticClass:"col-xxl-3 col-xl-5 col-md-6 col-12"},[t.testMailForm.busy?r("button",{staticClass:"btn btn-primary w-200 h-58",attrs:{type:"button"}},[t._v("\n                            "+t._s(t.$t("sending"))+"...\n                        ")]):r("button",{staticClass:"btn btn-primary w-200 h-58",attrs:{type:"submit"}},[r("icon-send"),t._v("\n                            "+t._s(t.$t("send"))+"\n                        ")],1)])])])])])])}),[],!1,null,null,null).exports}}]);