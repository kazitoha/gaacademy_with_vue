(self.webpackChunk=self.webpackChunk||[]).push([[2180],{2180:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d});var a=s(7757),n=s.n(a);function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e,s,a,n,r,l){try{var i=t[r](l),c=i.value}catch(t){return void s(t)}i.done?e(c):Promise.resolve(c).then(a,n)}function c(t){return function(){var e=this,s=arguments;return new Promise((function(a,n){var r=t.apply(e,s);function l(t){i(r,a,n,l,c,"next",t)}function c(t){i(r,a,n,l,c,"throw",t)}l(void 0)}))}}const o={components:{NotFound:function(){return s.e(549).then(s.bind(s,549))}},data:function(){return{searchForm:new Form({student_id:""}),classes_exam_terms:[],class_id:"",showSyllabusDetails:!1,syllabuses:[],term_name:""}},methods:{getStudentSyllabus:function(){var t=this;return c(n().mark((function e(){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/parent/student/syllabuses-terms",{params:{student_id:t.searchForm.student_id}});case 3:s=e.sent,t.classes_exam_terms=s.data.terms,t.class_id=s.data.class_id,t.showSyllabusDetails=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.errors);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},downloadAttachment:function(t){axios({url:"/api/syllabuses/download",method:"POST",responseType:"blob",data:{syllabus_id:t}}).then((function(t){var e=t.data.type.split("/")[1],s=Math.floor(9999999999*Math.random()),a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(s,".").concat(e)),document.body.appendChild(n),n.click()})).catch((function(t){console.log(t)}))},showDetails:function(t,e){var s=this;return c(n().mark((function a(){var r;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.showSyllabusDetails=!0,s.term_name=e,a.prev=2,a.next=5,axios.get("/api/syllabuses/classes/".concat(s.class_id,"/terms/").concat(t,"/get-syllabus-details"));case 5:r=a.sent,s.syllabuses=r.data.syllabus_details,s.$refs.syllabusDetails.scrollIntoView({behavior:"smooth",block:"start"}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0.response.data.errors);case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()}},created:function(){"Guardian"!=this.authenticateUser.original_role&&this.redirect("401"),this.$store.dispatch("parent/fetchChilds")},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},(0,s(629).Se)({user:"auth/user",childs:"parent/getChilds"})),mounted:function(){this.childs.length&&(this.searchForm.student_id=this.childs[0].student_id,this.getStudentSyllabus())}};const d=(0,s(1900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-header d-print-none"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col"},[s("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),s("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("class_syllabus")))])])])]),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-4 col-sm-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.student_id,expression:"searchForm.student_id"}],staticClass:"form-control text-center",class:{"is-invalid":t.searchForm.errors.has("student_id")},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"student_id",e.target.multiple?s:s[0])}}},[s("option",{staticClass:"d-none",attrs:{value:"",selected:""}},[t._v(t._s(t.$t("select_child")))]),t._v(" "),t._l(t.childs,(function(e){return s("option",{key:e.id,domProps:{value:e.student_id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2),t._v(" "),s("has-error",{attrs:{form:t.searchForm,field:"student_id"}})],1),t._v(" "),s("div",{staticClass:"col-4 col-sm-2"},[s("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.searchForm.student_id},on:{click:t.getStudentSyllabus}},[t._v("\n                        "+t._s(t.$t("get_syllabus"))+"\n                    ")])])])]),t._v(" "),t.classes_exam_terms.length?s("div",{staticClass:"col-12 mt-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h2",{staticClass:"card-title"},[t._v(t._s(t.$t("exam_terms")))])]),t._v(" "),s("div",{staticClass:"card-body table-responsive"},[s("table",{staticClass:"table table-bordered"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("exam_term")))]),t._v(" "),s("th",[t._v(t._s(t.$t("note")))]),t._v(" "),s("th",[t._v(t._s(t.$t("action")))])])]),t._v(" "),s("tbody",t._l(t.classes_exam_terms,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.exam.name))]),t._v(" "),s("td",[t._v(t._s(e.exam.note))]),t._v(" "),s("td",[s("a",{staticClass:"btn btn-primary btn-outline",attrs:{href:"#"},on:{click:function(s){return t.showDetails(e.exam_id,e.exam.name)}}},[s("icon-eye"),t._v("\n                                        "+t._s(t.$t("show_details"))+"\n                                    ")],1)])])})),0)])])]),t._v(" "),t.showSyllabusDetails?s("div",{ref:"syllabusDetails",staticClass:"card mt-3"},[s("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[s("h3",{staticClass:"card-title"},[t._v(t._s(t.term_name)+" "+t._s(t.$t("syllabus")))]),t._v(" "),s("a",{staticClass:"btn btn-danger",attrs:{href:"#"},on:{click:function(e){t.showSyllabusDetails=!1}}},[t._v(t._s(t.$t("close")))])]),t._v(" "),s("div",{staticClass:"card-body"},[t.syllabuses&&t.syllabuses.length?s("table",{staticClass:"table table-responsive"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("subject")))]),t._v(" "),s("th",[t._v(t._s(t.$t("attachment")))])])]),t._v(" "),s("tbody",t._l(t.syllabuses,(function(e){return s("tr",{key:e.id},[s("td",{attrs:{width:"20%"}},[t._v(t._s(e.subject_name))]),t._v(" "),s("td",{attrs:{width:"20%"}},[e.attachment?s("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(s){return t.downloadAttachment(e.id)}}},[s("icon-download"),t._v("\n                                        "+t._s(t.$t("download"))+"\n                                    ")],1):s("a",{staticClass:"btn btn-secondary",attrs:{href:"#",disabled:""}},[t._v("\n                                        "+t._s(t.$t("file_not_found"))+"\n                                    ")])])])})),0)]):s("div",{staticClass:"d-flex justify-content-center py-3"},[s("NotFound",{attrs:{word:"syllabus"}})],1)])]):t._e()]):s("div",{staticClass:"d-flex justify-content-center py-3"},[s("NotFound",{attrs:{word:"class routine"}})],1)])])}),[],!1,null,null,null).exports}}]);