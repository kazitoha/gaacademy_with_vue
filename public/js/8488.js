(self.webpackChunk=self.webpackChunk||[]).push([[8488],{2768:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(3645),a=n.n(r)()((function(t){return t[1]}));a.push([t.id,".text-align-center[data-v-476afab6]{text-align:center}.attendance-img[data-v-476afab6]{border-radius:10px;max-height:50px;max-width:50px}",""]);const s=a},8488:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var r=n(7757),a=n.n(r),s=n(7484),c=n.n(s);function i(t,e,n,r,a,s,c){try{var i=t[s](c),o=i.value}catch(t){return void n(t)}i.done?e(o):Promise.resolve(o).then(r,a)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const h={components:{NotFound:function(){return n.e(549).then(n.bind(n,549))}},data:function(){return{searchForm:new Form({student_id:"",year:"",month:""}),attendances:[]}},computed:d(d({},(0,n(629).Se)({user:"auth/user",childs:"parent/getChilds"})),{},{daysInMonth:function(){return c()("".concat(this.searchForm.year,"-").concat(this.searchForm.month)).daysInMonth()},disableSearchButton:function(){return""==this.searchForm.student_id||""==this.searchForm.month||""==this.searchForm.year}}),created:function(){"Guardian"!=this.authenticateUser.original_role&&this.redirect("401"),this.$store.dispatch("parent/fetchChilds"),this.searchForm.year=c()().year(),this.searchForm.student_id=this.childs[0].student_id,this.searchForm.month=("0"+(c()().month()+1)).slice(-2),this.getAttendanceReport()},methods:{getMonth:function(t,e){return c()("".concat(e,"-").concat(t)).format("YYYY-MM")},setMonth:function(t){var e=c()(t).format("MM"),n=c()(t).format("YYYY");this.searchForm.month=e,this.searchForm.year=n},isPresent:function(t,e){var n=t<10?"0".concat(t):t,r="".concat(this.searchForm.year,"-").concat(this.searchForm.month,"-").concat(n);return!!e.attendances.hasOwnProperty(r)&&1==e.attendances[r][0].status},getAttendanceReport:function(){var t,e=this;return(t=a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.attendances=[],t.next=4,e.searchForm.post("/api/parent/student/attendance");case 4:n=t.sent,e.attendances=n.data.attendences,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function c(t){i(s,r,a,c,o,"next",t)}function o(t){i(s,r,a,c,o,"throw",t)}c(void 0)}))})()},getMonthName:function(t){return c()("".concat(this.searchForm.year,"-").concat(t)).format("MMMM")}}};var u=n(3379),v=n.n(u),m=n(2768),_={insert:"head",singleton:!1};v()(m.Z,_);m.Z.locals;const p=(0,n(1900).Z)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"page-header d-print-none"},[n("div",{staticClass:"row align-items-center"},[n("div",{staticClass:"col"},[n("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),n("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("academic")))])])])]),t._v(" "),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-sm-2 col-6"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.student_id,expression:"searchForm.student_id"}],staticClass:"form-control",class:{"is-invalid":t.searchForm.errors.has("student_id")},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"student_id",e.target.multiple?n:n[0])}}},[n("option",{staticClass:"d-none",attrs:{value:"",selected:""}},[t._v(t._s(t.$t("select_child")))]),t._v(" "),t._l(t.childs,(function(e){return n("option",{key:e.id,domProps:{value:e.student_id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2),t._v(" "),n("has-error",{attrs:{form:t.searchForm,field:"student_id"}})],1),t._v(" "),n("div",{staticClass:"col-sm-3 col-6"},[n("date-picker",{attrs:{"minimum-view":"month","maximum-view":"year",format:"MMMM, yyyy","input-class":"form-control",placeholder:t.$t("select_month"),value:t.getMonth(t.searchForm.month,t.searchForm.year)},on:{input:function(e){return t.setMonth(e)}}}),t._v(" "),n("has-error",{staticClass:"d-block",attrs:{form:t.searchForm,field:"date"}})],1),t._v(" "),n("div",{staticClass:"col-sm-2 mt-3 mt-sm-0"},[n("button",{staticClass:"btn btn-primary btn-outline",attrs:{disabled:t.disableSearchButton},on:{click:function(e){return e.preventDefault(),t.getAttendanceReport(e)}}},[t._v("\n                        "+t._s(t.$t("get_attendance_report"))+"\n                    ")])])])]),t._v(" "),n("div",{staticClass:"col-md-4 my-3"},[n("div",{staticClass:"card bg-secondary text-white"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"text-center"},[n("h2",[t._v(t._s(t.$t("attendance_report")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("month"))+" : "+t._s(t.getMonthName(t.searchForm.month)))]),t._v(" "),n("h5",[t._v(t._s(t.$t("year"))+" : "+t._s(t.searchForm.year))])])])])]),t._v(" "),n("div",{staticClass:"col-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("div",{staticClass:"card-title"},[t._v(t._s(t.$t("attendance_report")))])]),t._v(" "),n("div",{staticClass:"card-body table-responsive"},[t.attendances.length?[n("table",{staticClass:"table table-hover table-bordered table-striped"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("photo")))]),t._v(" "),n("th",[t._v(t._s(t.$t("name")))]),t._v(" "),n("th",[t._v(t._s(t.$t("roll")))]),t._v(" "),t._l(t.daysInMonth,(function(e){return n("th",{key:e,staticClass:"text-align-center"},[t._v("\n                                        "+t._s(e)+"\n                                    ")])}))],2)]),t._v(" "),n("tbody",t._l(t.attendances,(function(e){return n("tr",{key:e.id},[n("td",[n("img",{staticClass:"img-fluid attendance-img",attrs:{src:e.user.image_url,alt:"image",height:"80px",width:"80px"}})]),t._v(" "),n("td",[t._v(t._s(e.user.name))]),t._v(" "),n("td",[t._v(t._s(e.roll_no))]),t._v(" "),t._l(t.daysInMonth,(function(r){return n("td",{key:r},[t.isPresent(r,e)?n("div",{staticClass:"text-align-center text-white bg-green"},[t._v("\n                                            P\n                                        ")]):n("div",{staticClass:"text-align-center text-white bg-red"},[t._v("\n                                            A\n                                        ")])])}))],2)})),0)])]:n("div",{staticClass:"d-flex justify-content-center py-3"},[n("NotFound",{attrs:{word:"Attendance"}})],1)],2)])])])])}),[],!1,null,"476afab6",null).exports}}]);