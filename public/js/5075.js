(self.webpackChunk=self.webpackChunk||[]).push([[5075,549],{5463:(t,e,s)=>{"use strict";var n=s(538);n="default"in n?n.default:n;var a="2.2.2";/^2\./.test(n.version)||n.util.warn("VueClickaway 2.2.2 only supports Vue 2.x, and does not support Vue "+n.version);var r="_vue_clickaway_handler";function i(t,e,s){o(t);var n=s.context,a=e.value;if("function"==typeof a){var i=!1;setTimeout((function(){i=!0}),0),t[r]=function(e){var s=e.path||(e.composedPath?e.composedPath():void 0);if(i&&(s?s.indexOf(t)<0:!t.contains(e.target)))return a.call(n,e)},document.documentElement.addEventListener("click",t[r],!1)}}function o(t){document.documentElement.removeEventListener("click",t[r],!1),delete t[r]}var c={bind:i,update:function(t,e){e.value!==e.oldValue&&i(t,e)},unbind:o},l={directives:{onClickaway:c}};e.jB=l},549:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});const n={data:function(){return{notFound:"/images/not-found.svg"}},props:{word:{type:String,default:"user",required:!1},route:{type:String,required:!1},btnShow:{type:Boolean,required:!1,default:!0}}};const a=(0,s(1900).Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"empty"},[s("div",{staticClass:"empty-img"},[s("img",{attrs:{src:t.notFound,height:"128",alt:"not found"}})]),t._v(" "),s("p",{staticClass:"empty-title"},[t._v(t._s(t.$t("no_results_found")))]),t._v(" "),s("p",{staticClass:"empty-subtitle text-muted"},[t._v("\n        "+t._s(t.$t("there_is_no"))+" "+t._s(t.word)+" "+t._s(t.$t("found_in_this_page"))+".\n    ")]),t._v(" "),t.route&&t.btnShow?s("div",{staticClass:"empty-action"},[s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:t.route}}},[s("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[s("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),t._v(" "),s("line",{attrs:{x1:"12",y1:"5",x2:"12",y2:"19"}}),t._v(" "),s("line",{attrs:{x1:"5",y1:"12",x2:"19",y2:"12"}})]),t._v("\n            "+t._s(t.$t("add_your_first"))+" "+t._s(t.word)+"\n        ")])],1):t._e()])}),[],!1,null,null,null).exports},5075:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>h});var n=s(7757),a=s.n(n),r=s(5463),i=s(549),o=s(629),c=s(5643);function l(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function d(t,e,s,n,a,r,i){try{var o=t[r](i),c=o.value}catch(t){return void s(t)}o.done?e(c):Promise.resolve(c).then(n,a)}function _(t){return function(){var e=this,s=arguments;return new Promise((function(n,a){var r=t.apply(e,s);function i(t){d(r,n,a,i,o,"next",t)}function o(t){d(r,n,a,i,o,"throw",t)}i(void 0)}))}}function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(Object(s),!0).forEach((function(e){p(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function p(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const m={mixins:[r.jB],components:{NotFound:i.default,BaseLabel:c.Z,DeleteButton:function(){return s.e(2815).then(s.bind(s,2815))}},computed:f(f({},(0,o.Se)({classes:"classs/classes",feesTypes:"fee/feesType"})),{},{searchButtonDisabled:function(){return""==this.searchForm.class_id||""==this.searchForm.section_id},getFeeTypeName:function(){var t=this;return this.feesTypes.find((function(e){return e.id==t.searchForm.type_id}))},getClassName:function(){var t=this;return this.classes.find((function(e){return e.id==t.searchForm.class_id}))},getSectionName:function(){var t=this;return this.sections.find((function(e){return e.id==t.searchForm.section_id}))}}),data:function(){return{searchForm:new Form({type_id:"",class_id:"",section_id:"",status:"0"}),isDeleteModalShow:!1,sections:[],fees:[],next:""}},methods:{loadSections:function(){var t=this;return _(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/classes/".concat(t.searchForm.class_id,"/sections"));case 3:s=e.sent,t.sections=s.data.sections,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t.toastError(e.t0.response.data.message),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},deleteData:function(t){var e=this;return _(a().mark((function s(){var n;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,axios.delete("/api/fees/".concat(t));case 3:n=s.sent,e.fees=e.fees.filter((function(e){return e.id!==t})),e.toastSuccess(n.data.message),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(0),e.toastError();case 11:case"end":return s.stop()}}),s,null,[[0,8]])})))()},toggleDeleteModal:function(){this.isDeleteModalShow=!this.isDeleteModalShow,this.selectedId=""},getFeesCollections:function(){var t=this;return _(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/fees",{params:{type_id:t.searchForm.type_id,class_id:t.searchForm.class_id,section_id:t.searchForm.section_id,status:t.searchForm.status}});case 2:s=e.sent,t.fees=s.data.data,t.next=s.data.next_page_url;case 5:case"end":return e.stop()}}),e)})))()},loadMoreData:function(){var t=this;return _(a().mark((function e(){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get(t.next);case 2:s=e.sent,t.next=s.data.next_page_url,t.fees=[].concat(l(t.fees),l(s.data.data));case 5:case"end":return e.stop()}}),e)})))()},markPaid:function(t){var e=this;return _(a().mark((function s(){var n;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!confirm("Are you sure you want to mark this fee as paid?")){s.next=6;break}return s.next=3,axios.put("/api/fees/".concat(t,"/mark-paid"));case 3:n=s.sent,e.fees=e.fees.filter((function(e){return e.id!==t})),e.toastSuccess(n.data.message);case 6:case"end":return s.stop()}}),s)})))()},markUnpaid:function(t){var e=this;return _(a().mark((function s(){var n;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!confirm("Are you sure you want to mark this fee as unpaid?")){s.next=6;break}return s.next=3,axios.put("/api/fees/".concat(t,"/mark-unpaid"));case 3:n=s.sent,e.fees=e.fees.filter((function(e){return e.id!==t})),e.toastSuccess(n.data.message);case 6:case"end":return s.stop()}}),s)})))()}},created:function(){var t=this;return _(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.hasPermisssion("fee-list");case 2:return e.next=4,t.$store.dispatch("fee/fetchFeesType");case 4:return e.next=6,t.$store.dispatch("classs/fetchClasses");case 6:case"end":return e.stop()}}),e)})))()}};const h=(0,s(1900).Z)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-header d-print-none"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col"},[s("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),s("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("fees")))])]),t._v(" "),t.checkPermission("fee-create")?s("div",{staticClass:"col-auto ms-auto d-print-none"},[s("div",{staticClass:"d-flex"},[s("router-link",{staticClass:"btn btn-primary btn-outline",attrs:{to:{name:"fees-allocation"}}},[s("icon-plus"),t._v("\n                        "+t._s(t.$t("fee_allocation"))+"\n                    ")],1)],1)]):t._e()])]),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-4 col-xl-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.type_id,expression:"searchForm.type_id"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"type_id",e.target.multiple?s:s[0])}}},[s("option",{staticClass:"d-none",attrs:{value:""}},[t._v("\n                            "+t._s(t.$t("select_fee_type"))+"\n                        ")]),t._v(" "),t._l(t.feesTypes,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2)]),t._v(" "),t.searchForm.type_id?s("div",{staticClass:"col-md-4 col-xl-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.class_id,expression:"searchForm.class_id"}],staticClass:"form-control",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"class_id",e.target.multiple?s:s[0])},t.loadSections]}},[s("option",{staticClass:"d-none",attrs:{value:""}},[t._v("\n                            "+t._s(t.$t("select_class"))+"\n                        ")]),t._v(" "),t._l(t.classes,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2)]):t._e(),t._v(" "),t.searchForm.type_id&&t.searchForm.class_id?s("div",{staticClass:"col-md-4 col-xl-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.section_id,expression:"searchForm.section_id"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"section_id",e.target.multiple?s:s[0])}}},[s("option",{staticClass:"d-none",attrs:{value:""}},[t._v("\n                            "+t._s(t.$t("select_section"))+"\n                        ")]),t._v(" "),t._l(t.sections,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2)]):t._e(),t._v(" "),t.searchForm.type_id&&t.searchForm.class_id&&t.searchForm.section_id?s("div",{staticClass:"col-md-4 col-xl-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.status,expression:"searchForm.status"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.searchForm,"status",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"0",selected:""}},[t._v(t._s(t.$t("unpaid")))]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v(t._s(t.$t("paid")))])])]):t._e(),t._v(" "),t.searchForm.type_id&&t.searchForm.class_id&&t.searchForm.section_id&&t.searchForm.status?s("div",{staticClass:"col-md-4 col-xl-2"},[s("button",{staticClass:"btn btn-primary btn-outline",attrs:{disabled:t.searchButtonDisabled},on:{click:t.getFeesCollections}},[t._v("\n                        "+t._s(t.$t("get_fees"))+"\n                    ")])]):t._e()])]),t._v(" "),t.fees&&t.fees.length?s("div",{staticClass:"col-md-4 my-3"},[s("div",{staticClass:"card bg-secondary text-white"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"text-center"},[s("h2",[t._v(t._s(t.$t("fee_information")))]),t._v(" "),s("h4",[s("b",[t._v(t._s(t.$t("fee_type"))+":")]),t._v(" "+t._s(t.getFeeTypeName.name)+"\n                        ")]),t._v(" "),s("h4",[s("b",[t._v(t._s(t.$t("class"))+":")]),t._v(" "+t._s(t.getClassName.name)+"\n                        ")]),t._v(" "),s("h5",[s("b",[t._v(t._s(t.$t("section"))+":")]),t._v(" "+t._s(t.getSectionName.name)+"\n                        ")]),t._v(" "),s("h5",[s("b",[t._v(t._s(t.$t("status"))+":")]),t._v(" "),1==t.searchForm.status?s("span",[t._v(t._s(t.$t("paid")))]):s("span",[t._v(t._s(t.$t("unpaid")))])])])])])]):t._e(),t._v(" "),t.fees&&t.fees.length?s("div",{staticClass:"col-12 mt-3"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h2",{staticClass:"card-title"},[t._v(t._s(t.$t("fees")))])]),t._v(" "),s("div",{staticClass:"card-body table-responsive"},[t.fees&&t.fees.length?s("table",{staticClass:"table table-vcenter text-nowrap"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("user_information")))]),t._v(" "),s("th",[t._v(t._s(t.$t("transaction_no")))]),t._v(" "),s("th",[t._v(t._s(t.$t("amount")))]),t._v(" "),s("th",[t._v(t._s(t.$t("due_date")))]),t._v(" "),s("th",[t._v(t._s(t.$t("pay_date")))]),t._v(" "),t.checkPermission("fee-edit")||t.checkPermission("fee-delete")?s("th",{attrs:{width:"25%"}},[t._v("\n                                    "+t._s(t.$t("action"))+"\n                                ")]):t._e()])]),t._v(" "),s("tbody",t._l(t.fees,(function(e){return s("tr",{key:e.id},[s("td",[e.student?s("h3",[s("b",[t._v(t._s(t.$t("student"))+":")]),t._v(" "),s("small",[s("router-link",{attrs:{to:{name:"user-student-view",params:{id:e.student_id}}}},[t._v("\n                                                "+t._s(e.student.user.name)+"\n                                            ")])],1)]):t._e(),t._v(" "),e.parent?s("h3",[s("b",[t._v(t._s(t.$t("parent"))+":")]),t._v(" "),s("small",[s("router-link",{attrs:{to:{name:"user-guardian-view",params:{id:e.parent_id}}}},[t._v("\n                                                "+t._s(e.parent.user.name)+"\n                                            ")])],1)]):t._e()]),t._v(" "),s("td",[t._v(t._s(e.transaction_no))]),t._v(" "),s("td",[t._v(t._s(e.amount))]),t._v(" "),s("td",[t._v(t._s(t.formateDate(e.due_date)))]),t._v(" "),s("td",[t._v(t._s(e.pay_date?t.formateDate(e.pay_date):"-"))]),t._v(" "),t.checkPermission("fee-edit")||t.checkPermission("fee-delete")?s("td",[e.status?t._e():s("button",{staticClass:"btn btn-success",on:{click:function(s){return t.markPaid(e.id)}}},[t._v("\n                                        "+t._s(t.$t("mark_as_paid"))+"\n                                    ")]),t._v(" "),t.checkPermission("fee-edit")&&!e.status?s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"fees-allocation-edit",params:{id:e.id}}}},[t._v("\n                                        "+t._s(t.$t("edit"))+"\n                                    ")]):t._e(),t._v(" "),t.checkPermission("fee-delete")?s("DeleteButton",{attrs:{id:e.id},on:{"delete-data":t.deleteData}}):t._e()],1):t._e()])})),0)]):t._e(),t._v(" "),t.next?s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-primary",on:{click:t.loadMoreData}},[t._v("\n                            "+t._s(t.$t("load_more"))+"\n                        ")])]):t._e()])])]):s("div",{staticClass:"d-flex justify-content-center py-3"},[s("NotFound",{attrs:{word:"class routine"}})],1)])])}),[],!1,null,null,null).exports}}]);