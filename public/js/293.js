(self.webpackChunk=self.webpackChunk||[]).push([[293],{293:(t,s,e)=>{"use strict";e.r(s),e.d(s,{default:()=>o});var a=e(7757),n=e.n(a);function l(t,s,e,a,n,l,r){try{var c=t[l](r),o=c.value}catch(t){return void e(t)}c.done?s(o):Promise.resolve(o).then(a,n)}function r(t){return function(){var s=this,e=arguments;return new Promise((function(a,n){var r=t.apply(s,e);function c(t){l(r,a,n,c,o,"next",t)}function o(t){l(r,a,n,c,o,"throw",t)}c(void 0)}))}}const c={components:{NotFound:function(){return e.e(549).then(e.bind(e,549))}},created:function(){"Student"!=this.authenticateUser.original_role&&this.redirect("401"),this.getSyllabus()},data:function(){return{classes_exam_terms:[],class_id:"",showSyllabusDetails:!1,syllabuses:[],term_name:""}},methods:{getSyllabus:function(){var t=this;return r(n().mark((function s(){var e;return n().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,axios.get("/api/student/syllabuses-terms");case 3:e=s.sent,t.classes_exam_terms=e.data.terms,t.class_id=e.data.class_id,t.showSyllabusDetails=!1,s.next=13;break;case 9:s.prev=9,s.t0=s.catch(0),t.toastError(s.t0.response.data.message),console.log(s.t0.response.data.errors);case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},downloadAttachment:function(t){axios({url:"/api/syllabuses/download",method:"POST",responseType:"blob",data:{syllabus_id:t}}).then((function(t){var s=t.data.type.split("/")[1],e=Math.floor(9999999999*Math.random()),a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e,".").concat(s)),document.body.appendChild(n),n.click()})).catch((function(t){console.log(t)}))},showDetails:function(t,s){var e=this;return r(n().mark((function a(){var l;return n().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.showSyllabusDetails=!0,e.term_name=s,a.prev=2,a.next=5,axios.get("/api/syllabuses/classes/".concat(e.class_id,"/terms/").concat(t,"/get-syllabus-details"));case 5:l=a.sent,e.syllabuses=l.data.syllabus_details,e.$refs.syllabusDetails.scrollIntoView({behavior:"smooth",block:"start"}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),e.toastError(a.t0.response.data.message),console.log(a.t0.response);case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()}}};const o=(0,e(1900).Z)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"page-header d-print-none"},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col"},[e("h2",{staticClass:"page-title"},[t._v(t._s(t.$route.meta.title))]),t._v(" "),e("h2",{staticClass:"page-pretitle"},[t._v(t._s(t.$t("class_syllabus")))])])])]),t._v(" "),e("div",{staticClass:"row justify-content-center"},[t.classes_exam_terms.length?e("div",{staticClass:"col-12 mt-3"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h2",{staticClass:"card-title"},[t._v(t._s(t.$t("exam_terms")))])]),t._v(" "),e("div",{staticClass:"card-body  card-body-scrollable card-body-scrollable-shadow"},[e("table",{staticClass:"table table-bordered"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("exam_term")))]),t._v(" "),e("th",[t._v(t._s(t.$t("note")))]),t._v(" "),e("th",[t._v(t._s(t.$t("action")))])])]),t._v(" "),e("tbody",t._l(t.classes_exam_terms,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.exam.name))]),t._v(" "),e("td",[t._v(t._s(s.exam.note))]),t._v(" "),e("td",[e("a",{staticClass:"btn btn-primary btn-outline",attrs:{href:"#"},on:{click:function(e){return t.showDetails(s.exam_id,s.exam.name)}}},[e("icon-eye"),t._v("\n                                        "+t._s(t.$t("show_details"))+"\n                                    ")],1)])])})),0)])])]),t._v(" "),t.showSyllabusDetails?e("div",{ref:"syllabusDetails",staticClass:"card mt-3"},[e("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[e("h3",{staticClass:"card-title"},[t._v(t._s(t.term_name)+" "+t._s(t.$t("syllabus")))]),t._v(" "),e("a",{staticClass:"btn btn-danger",attrs:{href:"#"},on:{click:function(s){t.showSyllabusDetails=!1}}},[t._v(t._s(t.$t("close")))])]),t._v(" "),e("div",{staticClass:"card-body"},[t.syllabuses&&t.syllabuses.length?e("table",{staticClass:"table table-responsive"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("subject")))]),t._v(" "),e("th",[t._v(t._s(t.$t("attachment")))])])]),t._v(" "),e("tbody",t._l(t.syllabuses,(function(s){return e("tr",{key:s.id},[e("td",{attrs:{width:"20%"}},[t._v(t._s(s.subject_name))]),t._v(" "),e("td",{attrs:{width:"20%"}},[s.attachment?e("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(e){return t.downloadAttachment(s.id)}}},[e("icon-download"),t._v("\n                                        "+t._s(t.$t("download"))+"\n                                    ")],1):e("a",{staticClass:"btn btn-secondary",attrs:{href:"#",disabled:""}},[t._v("\n                                        "+t._s(t.$t("file_not_found"))+"\n                                    ")])])])})),0)]):e("div",{staticClass:"d-flex justify-content-center py-3"},[e("NotFound",{attrs:{word:"syllabus"}})],1)])]):t._e()]):e("div",{staticClass:"d-flex justify-content-center py-3"},[e("NotFound",{attrs:{word:"class routine"}})],1)])])}),[],!1,null,null,null).exports}}]);